(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{119:function(n,e){},123:function(n,e,t){"use strict";t.r(e);var o=t(1),a=t.n(o),r=t(49),c=t.n(r),i=t(125),s=t(8),l=t(17),u=t(52),d=t(13),w=t.n(d),h=t(28),f=t(11),p=t(12),m=t(29),k=t.n(m),v=t(127),C=window.location.href.startsWith("https://localhost")?"https://localhost:3000":"https://api.ateventhorizon.com",S=k.a.create({baseURL:C,headers:{"Content-Type":"application/json","Cache-Control":"no-cache"},withCredentials:!0,adapter:Object(v.a)(k.a.defaults.adapter)}),g="editor",b=function(){function n(e){var t=this;Object(f.a)(this,n),this.store=null,this.loaderModule=null,this.wasmBinary=null,this.wasmScript=null,this.wasmBinaryUrl="/fs/artifacts%2F".concat(g,".wasm"),this.wasmScriptUrl="/fs/artifacts%2F".concat(g,".js"),this.downloadWasm=Object(h.a)(w.a.mark(function n(){var e,o,a;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e={url:t.wasmBinaryUrl,method:"get",responseType:"arraybuffer"},n.next=4,S(e);case 4:return o=n.sent,t.wasmBinary=new Uint8Array(o.data),e={url:t.wasmScriptUrl,method:"get",responseType:"text"},n.next=9,S(e);case 9:a=n.sent,t.wasmScript=a.data,n.next=18;break;case 13:n.prev=13,n.t0=n.catch(0),console.log(n.t0),t.wasmBinary=null,t.wasmScript=null;case 18:case"end":return n.stop()}},n,this,[[0,13]])})),this.instantiateWasm=function(){var n=Object(h.a)(w.a.mark(function n(e){var o;return w.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.downloadWasm();case 2:t.loaderModule.canvas=e,window.Module=t.loaderModule,(o=document.createElement("script")).text=t.wasmScript,document.body.appendChild(o);case 7:case"end":return n.stop()}},n,this)}));return function(e){return n.apply(this,arguments)}}(),this.store=e,window.location.href.startsWith("https://localhost:5000")?(this.wasmBinaryUrl="https://localhost:5000/".concat(g,".wasm"),this.wasmScriptUrl="https://localhost:5000/".concat(g,".js")):window.location.href.startsWith("http://localhost:5000")&&(this.wasmBinaryUrl="http://localhost:5000/".concat(g,".wasm"),this.wasmScriptUrl="http://localhost:5000/".concat(g,".js")),console.log(window.location.href),this.loaderModule={print:function(n){console.log(n)},printErr:function(n){console.log("ERROR: "+n)},canvas:null,onRuntimeInitialized:function(){console.log("Runtime initialized"),setTimeout(function(){},3e3)},instantiateWasm:function(n,e){return WebAssembly.instantiate(window.wasmLoader.wasmBinary,n).then(function(n){console.log("wasm instantiation succeeded"),e(n.instance)}).catch(function(n){console.log("wasm instantiation failed! "+n)}),{}}}}return Object(p.a)(n,[{key:"checkWasmSupport",value:function(){return"object"===typeof WebAssembly}},{key:"checkWebGL2Support",value:function(){var n=document.createElement("canvas"),e=!1;try{null!==n.getContext("webgl2")&&(e=!0)}catch(t){}return e}}]),n}(),E=(t(94),t(18)),y=t(16),O=t(19),U=t(126),H=function(n){var e=!1;"guest@49view.com"===n.user.email&&(e=!0);var t=1e3*n.expires-(new Date).getTime();return console.log("Token expires in: "+t+" ms"),{type:"AUTH_SUCCESS",isGuest:e,user:n.user}},T=function(){return function(n){console.log("CHECK CURRENT USER");S.get("/user").then(function(e){console.log("CHECK CURRENT USER SUCCESS"),n(H(e.data))}).catch(function(e){var t,o,a;console.log("CHECK CURRENT USER FAILED"),n((t="guest@49view.com",o="guest",a="49View",function(n){n({type:"AUTH_START"});var e={email:t,password:o,project:a};S.post("/getToken",e).then(function(e){console.log("AUTH SUCCESS"),console.log(e);var t=new Date(e.data.expires);console.log("EXPIRATION DATE: "+t),n(H(e.data))}).catch(function(e){n({type:"AUTH_FAIL",error:e.response.data.error}),console.log("AUTH FAIL")})}))})}},j=t(30),A=t.n(j);window.Module={},window.wasmBinary=null;var R=function(n){function e(){var n,t;Object(f.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=Object(E.a)(this,(n=Object(y.a)(e)).call.apply(n,[this].concat(a)))).state={isVisible:!0},t.canvas=null,t}return Object(O.a)(e,n),Object(p.a)(e,[{key:"componentDidMount",value:function(){window.wasmLoader.instantiateWasm(this.canvas)}},{key:"render",value:function(){var n=this,e=[A.a.Canvas];return!0!==this.props.visible&&e.push(A.a.Hidden),a.a.createElement("canvas",{ref:function(e){return n.canvas=e},className:e.join(" ")})}}]),e}(o.Component),W=t(54),_=t.n(W),x=t(55),M=t.n(x),B=function(){return{socket:null,socketMessageHandler:function(n){var e=JSON.parse(n);console.log("FROM SOCKET ",e),"/HouseBSData/create"===e.msg&&console.log("NEW PROPERTY ADDED")},onSocketEventCallback:null,connect:function(n){window.SocketClientHandler.onSocketEventCallback=function(n,e){window.Module.onSocketEventCallback(n,JSON.stringify(e))},window.SocketClientHandler.socket=M()(n),window.SocketClientHandler.socket.on("connect",function(n){window.SocketClientHandler.onSocketEventCallback("connect",null)}),window.SocketClientHandler.socket.on("message",function(n){window.SocketClientHandler.socketMessageHandler(n),window.SocketClientHandler.onSocketEventCallback("message",n)}),window.SocketClientHandler.socket.on("disconnect",function(n){window.SocketClientHandler.onSocketEventCallback("disconnect",{reason:n})}),window.SocketClientHandler.socket.on("error",function(n){window.SocketClientHandler.onSocketEventCallback("error",n)})},send:function(n){if(null!==window.SocketClientHandler.socket){var e=JSON.parse(n);window.SocketClientHandler.socket.emit("message",e)}}}};window.SocketClientHandler=B();var D=function(n){function e(){var n,t;Object(f.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(t=Object(E.a)(this,(n=Object(y.a)(e)).call.apply(n,[this].concat(a)))).onClickHandler=function(){alert("CLICK")},t}return Object(O.a)(e,n),Object(p.a)(e,[{key:"componentDidMount",value:function(){this.props.onCheckCurrentUser()}},{key:"render",value:function(){return a.a.createElement("div",{className:_.a.App},a.a.createElement(R,null))}}]),e}(o.Component),L=Object(U.a)(Object(l.b)(function(n){return{isAuthenticated:null!=n.auth.token}},function(n){return{onCheckCurrentUser:function(){return n(T())}}})(D));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=t(58),I=function(n,e){return Object(N.a)({},n,e)},F={error:null,loading:!1,isGuest:!1,user:null},G=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"AUTH_START":return function(n,e){return I(n,{error:null,loading:!0})}(n);case"AUTH_SUCCESS":return function(n,e){return I(n,{error:null,loading:!1,isGuest:e.isGuest,user:e.user})}(n,e);case"AUTH_FAIL":return function(n,e){return I(n,{error:e.error,loading:!1})}(n,e);case"AUTH_LOGOUT":return function(n,e){return I(n,{isGuest:!1,user:null})}(n);default:return n}},J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,K=Object(s.c)({auth:G}),P=Object(s.e)(K,J(Object(s.a)(u.a)));window.wasmLoader=new b(P);var z=a.a.createElement(l.a,{store:P},a.a.createElement(i.a,null,a.a.createElement(L,null)));c.a.render(z,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(n){n.unregister()})},30:function(n,e,t){},54:function(n,e,t){},60:function(n,e,t){n.exports=t(123)},94:function(n,e,t){}},[[60,2,1]]]);
//# sourceMappingURL=main.6db19f23.chunk.js.map